(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{2696:(e,a,t)=>{"use strict";t.d(a,{L:()=>o,LoadingOverlay:()=>c});var r=t(5155),s=t(8574),l=t(4426),n=t(2115);class i{show(){this.listeners.forEach(e=>e(!0))}hide(){this.listeners.forEach(e=>e(!1))}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}constructor(){this.listeners=new Set}}let o=new i;function c(){let[e,a]=(0,n.useState)(!1);return((0,n.useEffect)(()=>o.subscribe(a),[]),e)?(0,r.jsx)(s.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!0,children:(0,r.jsx)(l.A,{color:"inherit"})}):null}},4515:(e,a,t)=>{"use strict";t.d(a,{O:()=>s});var r=t(3464);function s(){return{index:async e=>{let{rowPerPage:a=10,currentPage:t=1,unapproved:s=!1,q:l="",type:n="",rating:i="",order_by:o="popularity",sort:c="desc"}=e;try{return(await r.A.get("".concat("https://api.jikan.moe/v4","/anime"),{params:{page:t,limit:a,unapproved:s,q:l,type:n,rating:i,order_by:o,sort:c}})).data}catch(e){throw console.error(e),e}},show:async e=>{try{return(await r.A.get("".concat("https://api.jikan.moe/v4","/anime/").concat(e))).data}catch(e){throw console.error(e),e}}}}},5466:(e,a,t)=>{Promise.resolve().then(t.bind(t,8068))},8068:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>A});var r=t(5155),s=t(2115),l=t(4581),n=t(3731),i=t(7088),o=t(7348),c=t(7275),d=t(3939),p=t(5297),u=t(439);let h=["tv","movie","ova","special","ona","music","cm","pv","tv_special"],g=["mal_id","title","start_date","end_date","episodes","score","scored_by","rank","popularity","members","favorites"],m=["asc","desc"],x=["g","pg","pg13","r17","r","rx"];function v(e){var a,t;let{datas:s=[],pagination:v={last_visible_page:0,has_next_page:!1,current_page:1,items:{count:0,total:0,per_page:10}},onPageChange:j=()=>{},onRowsPerPageChange:_=()=>{},filters:y={type:"",order_by:"popularity",sort:"desc",q:"",rating:""},onFilterChange:b=()=>{},onSelectedData:f=()=>{},has_next_page:A=!0}=e,w=e=>{let{name:a,value:t}=e.target;console.log("Filter changed: ".concat(a," = ").concat(t)),null==b||b({...y,[a]:t})},N=e=>null==f?void 0:f(e);return(0,r.jsxs)("div",{className:"flex flex-col items-center text-black p-6",children:[(0,r.jsxs)(l.A,{className:"w-full flex flex-wrap gap-4 justify-start mb-6",children:[(0,r.jsx)(n.A,{label:"Search Anime",name:"q",type:"text",size:"small",value:y.q||"",onChange:w}),(0,r.jsxs)(i.A,{size:"small",sx:{minWidth:140},children:[(0,r.jsx)(o.A,{children:"Type"}),(0,r.jsxs)(c.A,{name:"type",value:(null==y?void 0:y.type)||"",onChange:w,label:"Type",children:[(0,r.jsx)(d.A,{value:"",children:"NONE"}),h.map(e=>(0,r.jsx)(d.A,{value:e,children:e.replace(/_/g," ").toUpperCase()},e))]})]}),(0,r.jsxs)(i.A,{size:"small",sx:{minWidth:140},children:[(0,r.jsx)(o.A,{children:"Rating"}),(0,r.jsxs)(c.A,{name:"rating",value:y.rating||"",onChange:w,label:"Rating",children:[(0,r.jsx)(d.A,{value:"",children:"All"}),x.map(e=>(0,r.jsx)(d.A,{value:e,children:"g"===e?"G - All Ages":"pg"===e?"PG - Children":"pg13"===e?"PG-13 - Teens 13 or older":"r"===e?"R - 17+ (violence & profanity)":"r+"===e?"R+ - Mild Nudity":"rx"===e?"RX - Hentai":e.toUpperCase()},e))]})]}),(0,r.jsxs)(i.A,{size:"small",sx:{minWidth:140},children:[(0,r.jsx)(o.A,{children:"Order By"}),(0,r.jsxs)(c.A,{name:"order_by",value:y.order_by||"",onChange:w,label:"Order By",children:[(0,r.jsx)(d.A,{value:"",children:"DEFAULT"}),g.map(e=>(0,r.jsx)(d.A,{value:e,children:e.split("_").map(e=>e.toUpperCase()).join(" ")},e))]})]}),(0,r.jsxs)(i.A,{size:"small",sx:{minWidth:140},children:[(0,r.jsx)(o.A,{children:"Sort"}),(0,r.jsxs)(c.A,{name:"sort",value:y.sort||"",onChange:w,label:"Sort",children:[(0,r.jsx)(d.A,{value:"",children:"None"}),m.map(e=>(0,r.jsx)(d.A,{value:e,children:e.toUpperCase()},e))]})]})]}),s&&0!==s.length?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8 min-h-[400px]",children:s.map((e,a)=>{var t,s,l;return(0,r.jsxs)("div",{onClick:()=>N(null==e?void 0:e.mal_id),className:"bg-white rounded-xl shadow-md overflow-hidden hover:cursor-pointer hover:bg-gray-100 hover:scale-103 transition duration-100 ease-in-out border-2 border-gray-200 hover:border-gray-500",children:[(0,r.jsx)("img",{src:(null==(s=e.images)||null==(t=s.jpg)?void 0:t.image_url)||"/fallback.jpg",alt:e.title,className:"w-full h-80 object-cover"}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)(p.A,{title:e.title,children:(0,r.jsx)("h3",{className:"text-sm font-bold mb-2 line-clamp-1 hover:underline",children:e.title})}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1 line-clamp-3",children:e.synopsis||"No description."}),(0,r.jsxs)("p",{className:"text-sm text-gray-800 font-medium",children:["Score: ",null!=(l=e.score)?l:"N/A"]})]})]},a)})}):(0,r.jsxs)("div",{className:"text-center p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"No anime found"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"Try a different category or check your connection."})]}),(0,r.jsx)(u.A,{component:"div",count:(null==(a=v.items)?void 0:a.total)||0,page:v.current_page-1,onPageChange:(e,a)=>j(a+1),rowsPerPage:(null==(t=v.items)?void 0:t.per_page)||25,onRowsPerPageChange:e=>_(parseInt(e.target.value,10)),rowsPerPageOptions:[5,10,15,20,25],disabled:!A})]})}var j=t(2696),_=t(4515),y=t(4052),b=t.n(y),f=t(5695);function A(){let e=(0,f.useRouter)(),{index:a}=(0,_.O)(),[t,l]=(0,s.useState)([]),[n,i]=(0,s.useState)({last_visible_page:0,has_next_page:!1,current_page:1,items:{count:0,total:0,per_page:10}}),[o,c]=(0,s.useState)(null),[d,p]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[g,m]=(0,s.useState)(null),[x,y]=(0,s.useState)(null),A=async()=>{j.L.show();let e=await a({rowPerPage:n.items.per_page,currentPage:n.current_page,page:n.current_page,q:o,type:d,rating:x,order_by:u,sort:g});l((null==e?void 0:e.data)||[]),i((null==e?void 0:e.pagination)||n),j.L.hide()},w=a=>{e.push("/anime/view?id=".concat(a))},N=(0,s.useMemo)(()=>b()(()=>{A()},500),[o]);return((0,s.useEffect)(()=>{A()},[n.current_page,n.items.per_page,d,u,g,x]),(0,s.useEffect)(()=>(N(),()=>{N.cancel()}),[N]),0===t.length)?(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"No data available"}),(0,r.jsx)("p",{children:"Try searching for anime or checking your internet connection."})]}):(0,r.jsx)(v,{datas:t,pagination:n,onPageChange:e=>{i(a=>({...a,current_page:e}))},onRowsPerPageChange:e=>{i(a=>({...a,items:{...a.items,per_page:e},current_page:1}))},filters:{q:o,type:d,rating:x,order_by:u,sort:g},onFilterChange:e=>{c(e.q),p(e.type),y(e.rating),h(e.order_by),m(e.sort)},onSelectedData:e=>{w(e)}})}}},e=>{var a=a=>e(e.s=a);e.O(0,[960,574,464,354,755,910,664,441,684,358],()=>a(5466)),_N_E=e.O()}]);